{% extends 'base.html.twig' %}

{% block title %}Détail sortie | {{ parent() }}{% endblock %}

{% block body %}
    <div class="text-center">
        <div class="">
            <h1>{{ event.name }}</h1>
        </div>
        <div class="bg-detail text-dark text-left">
            <span class="font-weight-bold">Date debut :</span>
            <div class="">
                {{ event.dateDebut | date("d/m/Y H:i") }}
            </div>
            <span class="font-weight-bold">Date cloture :</span>
            <div class="">
                {{ event.dateCloture | date("d/m/Y H:i") }}
            </div>
            <span class="font-weight-bold">Inscription max : </span>
            <div class="">
                {{ event.inscriptionsMax }}
            </div>
            <span class="font-weight-bold">Durrées : </span>
            <div class="">
                {{ event.duration }} heures
            </div>
            <span class="font-weight-bold">Description : </span>
            <div class="">
                {{ event.description }}
            </div>
            <span class="font-weight-bold">Site : </span>
            <div class="">
                {{ event.site.name }}
            </div>
            <span class="font-weight-bold">Lieu : </span>
            <div class="">
                {{ event.lieu.name }}
            </div>
            <span class="font-weight-bold"></span>
            <div class="">
                {{ event.lieu.street }}
            </div>
            <span class="font-weight-bold">Code postal du lieu : </span>
            <div class="">
                {{ event.lieu.city.postalCode }}
            </div>
            <span class="font-weight-bold">Ville du lieu : </span>
            <div class="">
                {{ event.lieu.city.name }}
            </div>
            <span class="font-weight-bold"></span>
            <div class="">
                {{ event.lieu.latitude }}
            </div>
            <span class="font-weight-bold"></span>
            <div class="">
                {{ event.lieu.longitude }}
            </div>
            <span class="font-weight-bold">Liste des participants :</span>
            <table id="table" class="table table-striped table-bordered display responsive nowrap" style="width:100%">
                <thead>
                <th>Pseudo</th>
                <th>Nom</th>
                </thead>
                {% for subscription in event.subscriptions %}
                    <tr>
                        <td>{{ subscription.participant.username }}</td>
                        <td>{{subscription.participant.name}} {{subscription.participant.firstName}}</td>
                    </tr>
                {% endfor %}
            </table>
            {% if event.organisator == app.user %}
                <a href="{{ path("event_edit", {id: event.id}) }}">Modifier</a>
            {% elseif event.state != constant('App\\Service\\StateEnum::STATE_CREATE') %}
                <button id="inscription" class="mt-3 btn btn-primary" data-url="{{ path("subscription_add", {id: event.id}) }}">Inscription</button>
            {% endif %}
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    <script src="{{ asset("js/event/detail.js") }}"></script>
{% endblock %}