{%  extends('base.html.twig') %}

{% block title %}{{ "home.title"|trans }} {{ parent() }}{% endblock %}

{% block body %}
    <div class="row pt-1">
        <div class="col-md">
            <h5 class="mt-3">{{ "home.filter"|trans }}</h5>
        </div>
        <div class="col-md">
            <h5 class="mt-3">{{ "home.date"|trans }} {{ 'now'|date('d/m/Y') }}</h5>
            <h5 class="mt-3">{{ "home.user"|trans }} {{ app.user.firstName }}</h5>
        </div>
    </div>

    {{ form_start(formEvent) }}
    <div class="row mb-5">
        <div class="col-md mt-3">
            <div class="input-group mb-3">
                {{ form_label(formEvent.site) }}
                {{ form_widget(formEvent.site) }}
            </div>
            <div class="input-group">
                {{ form_label(formEvent.dateMax) }}
                {{ form_widget(formEvent.dateMin)  }}
                {{ form_label(formEvent.dateMin) }}
                {{ form_widget(formEvent.dateMax) }}
            </div>

        </div>
        <div class="col-md mt-3">
            {{ form_widget(formEvent.organisateur, {'attr': {'value':  app.user.username }}) }}
            {{ form_label(formEvent.organisateur) }}
            {{ form_label(formEvent.inscrit) }}
            {{ form_widget(formEvent.inscrit) }}
            {{ form_label(formEvent.nInscrit) }}
            {{ form_widget(formEvent.nInscrit) }}
            {{ form_widget(formEvent.finie) }}
        </div>
    </div>
    {{ form_end(formEvent) }}

    <table id="table" class="table table-striped table-bordered display responsive nowrap" style="width:100%">
        <thead>
        <tr>
            <td>{{ "home.table.header.event"|trans }}</td>
            <td>{{ "home.table.header.date.event"|trans }}</td>
            <td>{{ "home.table.header.date.closure"|trans }}</td>
            <td>{{ "home.table.header.subscriber"|trans }}</td>
            <td>{{ "home.table.header.state"|trans }}</td>
            <td>{{ "home.table.header.participate"|trans }}</td>
            <td>{{ "home.table.header.organisator"|trans }}</td>
            <td>{{ "home.table.header.actions"|trans }}</td>
            <td></td>
        </tr>
        </thead>
        <tbody>
        {% for value in sortie %}
            <tr>
                <td><a href="{{ path("event_detail", {id: value["id"]}) }}">{{ value['name'] }}</a></td>
                <td id="fini">{{ value['dateDebut'] | date('d/m/Y') }}</td>
                <td id="ffin">{{ value['dateCloture'] | date('d/m/Y') }}</td>
                <td>{{ value['nombreDeParticipant'] }}/{{ value['inscriptionsMax'] }}</td>
                <td>{{ "home.table.value.state"|transchoice(value['state']) }}</td>
                <td>{{ (value["Participation"] == "1" ? "X" : "") }}</td>
                <td><a href="{{ path('user_by_pseudo',{'pseudo':  value['username']}) }}">{{ value['username']}}</a></td>
                <td></td>
                <td>{{ value['site']}}</td>
            </tr>
        {% endfor %}
        </tbody>

    </table>

    <div>
        <a href="{{ path("event_create") }}" class="btn btn-primary">{{ "home.createEvent"|trans }}</a>
    </div>
{% endblock %}

{% block javascripts %}
    <script src="{{ asset("js/pageAccueil.js") }}"></script>
{% endblock %}

